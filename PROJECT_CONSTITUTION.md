# 🏛️ NT-X 프로젝트 헌법 (Supreme Constitution)

**프로젝트명**: NT-X (New Technology - eXtended)  
**제정일**: 2026-01-03  
**버전**: 2.0 (전면 개정)  
**효력**: 본 문서는 프로젝트의 최상위 규범이며, 모든 코드/문서/운영은 이를 준수해야 함

---

## 📜 제1장: 기본 원칙 (Fundamental Principles)

### 제1조: 단일값 금지의 원칙
- **모든 예측은 시나리오/범위/확률분포로 접근한다**
- "AL1 시작점 17"이 아니라 "AL1 시작점 범위 7~32 (±15)"
- 1204회차 실패 교훈: "단일값 올인은 실패 패턴을 반복한다"

### 제2조: 다양성 확보의 원칙
- **커버리지 > 정확도**
- 같은 축(1,2,3,6...)이 과집중되면 포트폴리오 전체가 무너진다
- 최소 50개 후보로 탐색 범위를 확장한다

### 제3조: 큰 점프 대응의 원칙
- **AL2 간격은 작은 간격만 보면 실패한다**
- ±30급 큰 점프를 반드시 포함한다
- 시나리오: 기본 / +5 / 역순 (최소 3종)

### 제4조: 40번대 강제 포함의 원칙
- **40~45 구간을 0개로 두지 않는다**
- 희소하지만 "반드시 1개 이상 포함"이 핵심 교훈
- 40번대 0개 조합은 비중 하향 또는 컷

### 제5조: 데이터 무결성의 원칙
- **DB 업데이트가 삐끗하면 전체가 오염된다**
- 수동 입력 1회 + 스크립트 검증 1회 고정
- 업데이트 없이 예측 생성 절대 금지

### 제6조: 7-Number Unified 학습의 원칙 (SSOT v2)
- **학습은 보너스를 포함한 7개 번호로 수행한다 (Main6 + Bonus 동등)**
- **예측 출력은 항상 6개 번호만 생성한다 (|C|=6)**
- 데이터 단위는 항상 O7 = (u1..u6, u7)이며, u7은 보너스 고정 위치다.
- 통계(빈도/전이/간격)는 7개 번호 전체를 동일 가중치(또는 보정 가중치)로 사용한다.

---

## 📅 제2장: 주간 운영 루틴 (Weekly Operation Routine)

### A. 데이터 업데이트 (추첨 직후 1회) ⚠️ CRITICAL

**대상 파일**: `00_데이터베이스/로또-회차별-당첨번호.md`

**필수 작업**:
1. 회차/날짜/당첨번호(정렬) + 보너스 반영
2. DB 검증 스크립트 실행
3. 이상 없을 시에만 다음 단계 진행

**실행 명령**:
```bash
python 20_파이썬코드/update_database.py --round {회차} --numbers {번호} --verify
```

**책임**: 데이터 담당자  
**검증**: 2인 확인 필수

---

### B. 공식 통계 재산출 (회차당 1회)

**대상**: 최근 50/30/10회 기준 통계

**필수 산출 항목**:

1. **AL1 시작점 범위** ⭐ 핵심
   - 평균 ± 표준편차
   - 예측 범위 산출 (예: 7~37)
   - **±15 범위 샘플링 준비**

2. **AL2 간격 범위** ⭐ 핵심
   - 작은 간격: -5 ~ +15
   - 큰 간격: ±20~30
   - 시나리오 3종 준비

3. **구간분포 (밴드)**
   - 1-9(소), 10-19, 20-29, 30-39, 40-45(대)
   - 각 밴드별 출현율

4. **홀짝/소대 비율**
   - 최빈 패턴 확인
   - 가드 기준선 설정

**실행 명령**:
```bash
python 20_파이썬코드/calculate_statistics.py --periods 50,30,10 --output stats.json
```

**출력**: `02_슈퍼엔진_코어/통계/최근_50_30_10회_공식통계.json`

---

### C. 후보 생성: Monte Carlo 파이프라인 (강제)

**핵심 규칙**: "공식 → 조합"이 아니라 "공식 → 시나리오 → 조합 후보군"

#### C-1. AL 후보 생성 (최소 21개)

**AL1 시작점 탐색** (±15 범위):
- 기준값이 17이면: [7, 12, 17, 22, 27, 32] 샘플링
- 최소 7개 시작점 × 3 간격 시나리오 = 21개

**AL2 간격 시나리오** (3종 강제):
1. 기본: 최빈 간격 사용
2. +5: 기본 + 5씩 추가
3. 역순: 델타 부호 반전 (큰 점프 대응)

**실행 명령**:
```bash
python 20_파이썬코드/generate_candidates_monte_carlo.py \
  --al1-range 15 \
  --al2-scenarios 3 \
  --min-candidates 21
```

#### C-2. 후보 확장 (21개 → 50~100개)

**확장 전략**:
- AL 후보에서 2~3개 변형 생성
- 변형 규칙:
  - (a) 40~45에서 1개 강제 치환
  - (b) Cold Number 1~2개 강제 슬롯
  - (c) 간격 미세 조정 (±2, ±3)

**실행 명령**:
```bash
python 20_파이썬코드/expand_candidates.py \
  --input candidates_base.json \
  --target 100 \
  --force-40s \
  --force-cold
```

---

### D. 가드/필터 (생성 후 자동 검증) ⚠️ 필수

**모든 조합은 다음 검증을 통과해야 한다**:

#### 필수 가드 (강제)

1. **홀짝 비율**
   - 허용: 2:4 / 3:3 / 4:2
   - 금지: 1:5, 0:6, 5:1, 6:0

2. **번호대 분포 (밴드)**
   - 1-9: 최소 1개
   - 10-19: 최소 1개
   - 20-29: 최소 1개
   - 30-39: 최소 1개
   - 40-45: **최소 1개 (강제)**

3. **연번 제약**
   - 3연속 이상 금지
   - 예: [1,2,3,4,5,6] 금지

4. **합계 범위**
   - 120~180 (표준 범위)
   - 100~120, 180~200 (허용, 비중 하향)
   - 100 미만, 200 초과 (금지)

5. **40번대 강제 포함** ⭐ 핵심
   - 40~45 중 최소 1개
   - 0개 조합은 자동 탈락

6. **Cold Number 슬롯**
   - 최근 20회 미출현 번호 중 1~2개 강제 포함
   - 완전히 제외하면 커버리지 손실

#### 실행 명령
```bash
python 20_파이썬코드/apply_guards.py \
  --input candidates_expanded.json \
  --output candidates_filtered.json \
  --strict
```

**출력**: 통과한 조합만 다음 단계로

---

### E. 포트폴리오 구성 (최종 제출 세트)

**기본 구성**: 총 50개

| 구분 | 개수 | 출처 | 선발 기준 |
|:-----|-----:|:-----|:----------|
| AL | 15 | Monte Carlo 후보 | 다양성 기준 |
| NT | 15 | NT-Ω Recency | 제약조건 통과 |
| Super | 10 | 슈퍼엔진 검증 | 법칙 조합 |
| Law | 10 | 제1~7법칙 | 독립 검증 통과 |

**선발 원칙**:
- 같은 축(1,2,3,6...) 과집중 방지
- 합계 분포: 저구간(100~120) 20%, 중구간(120~160) 60%, 고구간(160~180) 20%
- 40번대: 전체 50개 중 40개 이상에 포함

**실행 명령**:
```bash
python 20_파이썬코드/build_portfolio.py \
  --al 15 \
  --nt 15 \
  --super 10 \
  --law 10 \
  --diversity-check \
  --output portfolio_final.json
```

---

### F. 채점/학습 루프 (당첨 발표 후 필수)

**필수 출력물 3종**:

1. **예측 결과**
   - 경로: `예측폴더/예측조합/{회차}회차_예측조합.md`
   - 내용: 최종 제출 50개 + 근거

2. **학습 로그**
   - 경로: `예측폴더/학습결과/{법칙명}_{회차}회차_학습결과.md`
   - 내용: 법칙별 학습 과정 + 파라미터

3. **복기 리포트**
   - 경로: `10_분석보고서/{회차}_복기_및_학습결과.md`
   - 내용: 채점 결과 + 가중치 조정 + Next Step

**자동 채점 명령**:
```bash
python 20_파이썬코드/auto_scoring.py \
  --round {회차} \
  --winning-numbers {당첨번호} \
  --portfolio portfolio_final.json \
  --generate-reports
```

---

## 🚨 제3장: 금지 사항 (Prohibitions)

### 제6조: 절대 금지 목록

1. **단일값 직접 제출 금지**
   - "AL1=17, AL2=+8" 같은 단일 조합 직접 사용
   - 반드시 ±15 범위 탐색 후 선발

2. **40번대 0개 조합 제출 금지**
   - 필터를 통과하지 못한 조합은 제출 불가

3. **DB 검증 없이 예측 생성 금지**
   - 업데이트 후 검증 스크립트 필수 실행

4. **가드 우회 금지**
   - "이번만 예외"는 절대 불가
   - 모든 조합은 가드 통과 필수

5. **학습 루프 생략 금지**
   - 당첨 발표 후 채점/복기는 필수
   - 생략 시 다음 회차 예측 불가

---

## 📊 제4장: 실전 운영 체크리스트

**매 회차 고정 체크리스트** (순서대로 실행):

```
[ ] A. DB 업데이트
    [ ] 로또-회차별-당첨번호.md 반영
    [ ] 검증 스크립트 실행
    [ ] 2인 확인 완료

[ ] B. 공식 통계 재산출
    [ ] 최근 50/30/10회 통계
    [ ] AL1 범위 확인 (±15)
    [ ] AL2 시나리오 3종 준비

[ ] C. 후보 생성 (Monte Carlo)
    [ ] AL 시작점 ±15 탐색
    [ ] 간격 3시나리오 (기본/+5/역순)
    [ ] 최소 21개 후보 생성
    [ ] 50~100개 확장

[ ] D. 가드 필터
    [ ] 홀짝 비율 검증
    [ ] 밴드 분포 검증
    [ ] 연번 체크
    [ ] 합계 범위 검증
    [ ] 40번대 강제 포함 확인
    [ ] Cold Number 슬롯 확인

[ ] E. 포트폴리오 구성
    [ ] AL 15개 선발
    [ ] NT 15개 선발
    [ ] Super 10개 선발
    [ ] Law 10개 선발
    [ ] 다양성 검증 통과

[ ] F. 최종 제출
    [ ] 50개 확정
    [ ] 예측조합.md 생성
    [ ] 근거 문서화

[ ] G. 당첨 후 (발표 후)
    [ ] 자동 채점 실행
    [ ] 학습결과.md 생성
    [ ] 복기 리포트 작성
    [ ] 가중치 조정 반영
```

---

## 🎯 제5장: 핵심 교훈 (Lessons Learned)

### 1204회차 실패 분석 (절대 반복하지 말 것)

**실패 원인**:
1. 단일값 올인 (AL1=17 고정)
2. 작은 간격만 탐색 (큰 점프 -30 미대응)
3. 40번대 미포함
4. 저구간(1~29) 과집중

**개선 방안** (헌법에 반영됨):
1. ±15 범위 탐색 → 제1조
2. 간격 시나리오 3종 → 제3조
3. 40번대 강제 포함 → 제4조
4. 다양성 확보 → 제2조

### 핵심 문장 (암기 필수)

> "각 공식은 정답이 아니라 탐색 시작점이다.  
> 각 공식마다 10개 변형을 만들고,  
> 총 50~100개 후보로 커버율을 극대화한다."

---

## 📝 부칙

### 제1항: 헌법 개정
- 본 헌법은 프로젝트 운영 중 발견된 중대한 결함이 있을 때만 개정 가능
- 개정 시 버전 번호 상향 및 개정 사유 명시

### 제2항: 효력
- 본 헌법은 2026-01-03부터 즉시 효력 발생
- 기존 문서/코드와 충돌 시 본 헌법 우선

### 제3항: 위반 시 조치
- 헌법 위반 시 해당 예측 결과는 무효 처리
- 반복 위반 시 시스템 전체 재검토

---

**제정**: 2026-01-03  
**시행**: 2026-01-03  
**차기 검토**: 2026-02-01 (매월 1일)

---

**서명**: 로또분석 프로젝트 운영진

**이 헌법은 프로젝트의 최상위 규범이며, 모든 운영은 이를 준수해야 합니다.**
